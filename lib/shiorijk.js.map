{"version":3,"sources":["shiorijk.coffee","shiorijk-container.coffee","shiorijk-shiori-parser.coffee"],"names":[],"mappings":"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","file":"shiorijk.js","sourcesContent":["### (C) 2014-2016 Narazaka : Licensed under The MIT License - http://narazaka.net/license/MIT?2016 ###\n\nShioriJK = {}\n\nif module? and module.exports?\n  module.exports = ShioriJK\n","Function::property = (properties) ->\n  for property, descriptions of properties\n    Object.defineProperty @prototype, property, descriptions\n\nShioriJK.Message = {}\n\n# SHIORI Request Message Container\nclass ShioriJK.Message.Request\n  # initialize inner containers\n  # @param request_line [Hash|ShioriJK.Requestline] request line\n  # @param headers [Hash|ShioriJK.Headers.Request] request headers\n  # @param no_prepare [Boolean] do not prepare default RequestLine and Headers by the constructor\n  constructor : ({request_line, headers, no_prepare} = {}) ->\n    @request_line =\n      if request_line?\n        if request_line instanceof ShioriJK.RequestLine\n          request_line\n        else\n          new ShioriJK.RequestLine(request_line)\n      else if not no_prepare\n        new ShioriJK.RequestLine()\n    @headers =\n      if headers?\n        if headers instanceof ShioriJK.Headers.Request\n          headers\n        else\n          new ShioriJK.Headers.Request(headers)\n      else\n        new ShioriJK.Headers.Request()\n  # @property [ShioriJK.RequestLine] RequestLine Container\n  request_line: null\n  # @property [ShioriJK.Headers.Request] Headers Container\n  headers: null\n  # Message to string\n  # @return [String] message string\n  toString : ->\n    @request_line.toString() + '\\r\\n' + @headers.toString() + '\\r\\n'\n\n# SHIORI Response Message Container\nclass ShioriJK.Message.Response\n  # initialize inner containers\n  # @param status_line [Hash|ShioriJK.Statusline] status line\n  # @param headers [Hash|ShioriJK.Headers.Response] response headers\n  # @param no_prepare [Boolean] do not prepare default StatusLine and Headers by the constructor\n  constructor : ({status_line, headers, no_prepare} = {}) ->\n    @status_line =\n      if status_line?\n        if status_line instanceof ShioriJK.StatusLine\n          status_line\n        else\n          new ShioriJK.StatusLine(status_line)\n      else if not no_prepare\n        new ShioriJK.StatusLine()\n    @headers =\n      if headers?\n        if headers instanceof ShioriJK.Headers.Response\n          headers\n        else\n          new ShioriJK.Headers.Response(headers)\n      else\n        new ShioriJK.Headers.Response()\n  # @property [ShioriJK.RequestLine] StatusLine Container\n  status_line: null\n  # @property [ShioriJK.Headers.Request] Headers Container\n  headers: null\n  # Message to string\n  # @return [String] message string\n  toString : ->\n    @status_line.toString() + '\\r\\n' + @headers.toString() + '\\r\\n'\n\n# SHIORI Request Message's RequestLine Container\nclass ShioriJK.RequestLine\n  # initialize request line\n  # @param method [string] method\n  # @param protocol [string] protocol (default = 'SHIORI')\n  # @param version [string] version\n  constructor : ({method, protocol, version} = {}) ->\n    @arguments = {}\n    if method? then @method = method\n    @protocol = protocol || 'SHIORI' # for codo\n    if version? then @version = version\n  # @property [String] request method\n  method: null\n  # @property [String] protocol\n  protocol: null\n  # @property [String] version\n  version: null\n  @property\n    method :\n      get : -> @arguments.method\n      set : (method) ->\n        if method? and @version?\n          @validate_method_version method, @version\n        else if method?\n          switch method\n            when 'GET', 'NOTIFY', 'GET Version', 'GET Sentence', 'GET Word', 'GET Status', 'TEACH', 'GET String', 'NOTIFY OwnerGhostName', 'NOTIFY OtherGhostName', 'TRANSLATE Sentence'\n            else\n              throw 'Invalid protocol method : ' + method\n        @arguments.method = method\n    protocol :\n      get : -> @arguments.protocol\n      set : (protocol) ->\n        if protocol? and protocol != 'SHIORI'\n          throw 'Invalid protocol : ' + protocol\n        @arguments.protocol = protocol\n    version :\n      get : -> @arguments.version\n      set : (version) ->\n        if @method? and version?\n          @validate_method_version @method, version\n        else if version?\n          switch version\n            when '2.0', '2.2', '2.3', '2.4', '2.5', '2.6', '3.0'\n            else\n              throw 'Invalid protocol version : ' + version\n        @arguments.version = version\n  # validate\n  # @param method [String] method name == 'SHIORI'\n  # @param version [Number] version\n  # @throw [String] if invalid\n  validate_method_version : (method, version) ->\n    is_valid = false\n    switch version\n      when '2.0'\n        switch method\n          when 'GET Version', 'NOTIFY OwnerGhostName', 'GET Sentence', 'GET Word', 'GET Status'\n            is_valid = true\n      when '2.2'\n        switch method\n          when 'GET Sentence'\n            is_valid = true\n      when '2.3'\n        switch method\n          when 'NOTIFY OtherGhostName', 'GET Sentence'\n            is_valid = true\n      when '2.4'\n        switch method\n          when 'TEACH'\n            is_valid = true\n      when '2.5'\n        switch method\n          when 'GET String'\n            is_valid = true\n      when '2.6' # spec is unknown\n        switch method\n          when 'GET Sentence', 'GET Status', 'GET String', 'NOTIFY OwnerGhostName', 'NOTIFY OtherGhostName', 'GET Version', 'TRANSLATE Sentence'\n            is_valid = true\n      when '3.0'\n        switch method\n          when 'GET', 'NOTIFY'\n            is_valid = true\n    unless is_valid\n      throw 'Invalid protocol method and version : ' + method + ' SHIORI/' + version\n  # Message to string\n  # @return [String] message string\n  toString : ->\n    \"#{@method} #{@protocol}/#{@version}\"\n\n# SHIORI Response Message's StatusLine Container\nclass ShioriJK.StatusLine\n  # initialize status line\n  # @param code [number] status code\n  # @param protocol [string] protocol (default = 'SHIORI')\n  # @param version [string] version\n  constructor : ({code, protocol, version} = {}) ->\n    @arguments = {}\n    if code? then @code = code\n    @protocol = protocol || 'SHIORI' # for codo\n    if version? then @version = version\n  # @property [String] status code\n  code: null\n  # @property [String] protocol\n  protocol: null\n  # @property [String] version\n  version: null\n  @property\n    code :\n      get : -> @arguments.code\n      set : (code) ->\n        if code? and not @message[code]?\n          throw 'Invalid response code : ' + code\n        @arguments.code = code\n    protocol :\n      get : -> @arguments.protocol\n      set : (protocol) ->\n        if protocol? and protocol != 'SHIORI'\n          throw 'Invalid protocol : ' + protocol\n        @arguments.protocol = protocol\n    version :\n      get : -> @arguments.version\n      set : (version) ->\n        if version?\n          switch version\n            when '2.0', '2.2', '2.3', '2.4', '2.5', '2.6', '3.0'\n            else\n              throw 'Invalid protocol version : ' + version\n        @arguments.version = version\n  # Message to string\n  # @return [String] message string\n  toString : ->\n    \"#{@protocol}/#{@version} #{@code} #{@message[@code]}\"\n  # @property [Hash<Number, String>] status messages for status codes\n  message:\n    200 : 'OK'\n    204 : 'No Content'\n    310 : 'Communicate'\n    311 : 'Not Enough'\n    312 : 'Advice'\n    400 : 'Bad Request'\n    418 : \"I'm a tea pot\"\n    500 : 'Internal Server Error'\n\n# SHIORI Message Headers Container\nclass ShioriJK.Headers\n  # initialize headers\n  # @param header [Hash<String, String>] headers\n  constructor : (@header = {}) ->\n  # @property [Hash<String, String>] headers\n  header: null\n  # get header\n  # @param name [String] header name\n  # @return [String] header value\n  get : (name) ->\n    if @header[name]?\n      @header[name]\n  # set header\n  # @param name [String] header name\n  # @param value [String] header value\n  # @return [String] header value\n  set : (name, value) ->\n    @header[name] = value\n  # get header separated by \\x01 or some as an array\n  # @param name [String] header name\n  # @param separator [String] separator characters\n  # @return [Array<String>] header values\n  get_separated : (name, separator = '\\x01') ->\n    if @header[name]?\n      @header[name].split separator\n  # set header separated by \\x01 or some as an array\n  # @param name [String] header name\n  # @param value [Array<String>] header values\n  # @param separator [String] separator characters\n  # @return [String] header value\n  set_separated : (name, value, separator = '\\x01') ->\n    @header[name] = value.join separator\n  # get header separated by \\x02 and \\x01 or some as an array\n  # @param name [String] header name\n  # @param separator1 [String] first level separator characters\n  # @param separator2 [String] second level separator characters\n  # @return [Array<Array<String>>] header values\n  get_separated2 : (name, separator1 = '\\x02', separator2 = '\\x01') ->\n    if @header[name]?\n      ((element.split separator2) for element in @header[name].split separator1)\n  # set header separated by \\x02 and \\x01 or some as an array\n  # @param name [String] header name\n  # @param value [Array<Array<String>>] header values\n  # @param separator1 [String] first level separator characters\n  # @param separator2 [String] second level separator characters\n  # @return [String] header value\n  set_separated2 : (name, value, separator1 = '\\x02', separator2 = '\\x01') ->\n    @header[name] = (element.join separator2 for element in value).join separator1\n  # get Reference* headers\n  # @return [Array<String | undefined>] Reference* header values\n  references : ->\n    reference_max_index = -1\n    for name of @header\n      if (result = /^Reference(\\d+)$/.exec(name)) and reference_max_index < result[1] - 0\n        reference_max_index = result[1] - 0\n    (@header[\"Reference#{index}\"] for index in [0 ... reference_max_index + 1])\n  # check that headers are line feed free\n  # @throw [String] if not\n  validate : ->\n    for name, value of @header\n      if \"#{value}\".match /\\n/\n        throw 'Invalid header value - line feed found : [' + name + '] : ' + value\n  # Message to string\n  # @return [String] message string\n  toString : ->\n    str = ''\n    @validate()\n    for name, value of @header\n      str += \"#{name}: #{value}\\r\\n\"\n    str\n  # Reference* header (SHIORI/2.2-2.6,3.x)\n  # @param index [Number] reference index\n  # @return [String] header value\n  Reference : (index) -> @get \"Reference#{index}\"\n  # Value header (GET SHIORI/3.0)\n  # Reference* header (SHIORI/2.2-2.6,3.x)\n  # @param index [Number] reference index\n  # @param separator [String] separator characters\n  # @return [Array<String>] header values\n  ReferenceSeparated : (index, separator = '\\x01') -> (@get_separated \"Reference#{index}\", separator) || []\n  # Reference* header (SHIORI/2.2-2.6,3.x)\n  # @param index [Number] reference index\n  # @param separator1 [String] first level separator characters\n  # @param separator2 [String] second level separator characters\n  # @return [Array<Array<String>>] header values\n  ReferenceSeparated2 : (index, separator1 = '\\x02', separator2 = '\\x01') -> (@get_separated2 \"Reference#{index}\", separator1, separator2) || []\n\n# SHIORI Request Message Headers Container\nclass ShioriJK.Headers.Request extends ShioriJK.Headers\n  # @property [String] Charset header\n  Charset: null\n  # @property [String] Sender header\n  Sender: null\n  # @property [String] SecurityLevel header (SHIORI/2.2,2.6,3.x)\n  SecurityLevel: null\n  # @property [String] ID header (SHIORI/2.5,3.x)\n  ID: null\n  # @property [String] Event header (SHIORI/2.2)\n  Event: null\n  # @property [String] Type header (GET Word SHIORI/2.0)\n  Type: null\n  # @property [Array<String>] Status header (SHIORI/3.1)\n  Status: null\n  # @property [String] Ghost header (NOTIFY OwnerGhostName SHIORI/2.0,2.3)\n  Ghost: null\n  # @property [String] Sentence header (SHIORI/2.0,2.3b)\n  Sentence: null\n  # @property [String] To header (SHIORI/2.3b)\n  To: null\n  # @property [Number] Age header (SHIORI/2.3b)\n  Age: null\n  # @property [Array<Number>] Surface header (SHIORI/2.3b)\n  Surface: null\n  # @property [String] Word header (TEACH SHIORI/2.4)\n  Word: null\n  @property\n    # @property [String] Charset header\n    Charset :\n      get : -> @get \"Charset\"\n    # @property [String] Sender header\n    Sender :\n      get : -> @get \"Sender\"\n    # @property [String] SecurityLevel header (SHIORI/2.2,2.6,3.x)\n    SecurityLevel :\n      get : -> @get \"SecurityLevel\"\n    # @property [String] ID header (SHIORI/2.5,3.x)\n    ID :\n      get : -> @get \"ID\"\n    # @property [String] Event header (SHIORI/2.2)\n    Event :\n      get : -> @get \"Event\"\n    # @property [String] Type header (GET Word SHIORI/2.0)\n    Type :\n      get : -> @get \"Type\"\n    # @property [Array<String>] Status header (SHIORI/3.1)\n    Status :\n      get : -> (@get_separated \"Status\", \",\") || []\n    # @property [String] Ghost header (NOTIFY OwnerGhostName SHIORI/2.0,2.3)\n    Ghost :\n      get : -> @get \"Ghost\"\n    # @property [String] Sentence header (SHIORI/2.0,2.3b)\n    Sentence :\n      get : -> @get \"Sentence\"\n    # @property [String] To header (SHIORI/2.3b)\n    To :\n      get : -> @get \"To\"\n    # @property [Number] Age header (SHIORI/2.3b)\n    Age :\n      get : ->\n        age = @get \"Age\"\n        if age then Number(age)\n    # @property [Array<Number>] Surface header (SHIORI/2.3b)\n    Surface :\n      get : -> Number(value) for value in (@get_separated \"Surface\", \",\") || []\n    # @property [String] Word header (TEACH SHIORI/2.4)\n    Word :\n      get : -> @get \"Word\"\n\n# SHIORI Response Message Headers Container\nclass ShioriJK.Headers.Response extends ShioriJK.Headers\n  # @property [Array<Array<Number>>] BalloonOffset header (SHIORI/2.0)\n  BalloonOffset: null\n  # @property [Array<Number>] Surface header (SHIORI/2.3b)\n  Surface: null\n  # @property [String] Sentence header (SHIORI/2.0,2.2,2.3b,2.4)\n  Sentence: null\n  # @property [String] Word header (GET Word SHIORI/2.0)\n  Word: null\n  # @property [Array<Number>] Status header (GET Status SHIORI/2.0)\n  Status: null\n  # @property [String] String header (GET String SHIORI/2.5)\n  String: null\n  # String header (GET String SHIORI/2.5)\n  # @param separator [String] separator characters\n  # @return [Array<String>] header values\n  StringSeparated : (separator = '\\x01') -> (@get_separated \"String\", separator) || []\n  # String header (GET String SHIORI/2.5)\n  # @param separator1 [String] first level separator characters\n  # @param separator2 [String] second level separator characters\n  # @return [Array<Array<String>>] header values\n  StringSeparated2 : (separator1 = '\\x02', separator2 = '\\x01') -> (@get_separated2 \"String\", separator1, separator2) || []\n  # @property [String] Value header (GET SHIORI/3.0)\n  Value: null\n  # Value header (GET SHIORI/3.0)\n  # @param separator [String] separator characters\n  # @return [Array<String>] header values\n  ValueSeparated : (separator = '\\x01') -> (@get_separated \"Value\", separator) || []\n  # Value header (GET SHIORI/3.0)\n  # @param separator1 [String] first level separator characters\n  # @param separator2 [String] second level separator characters\n  # @return [Array<Array<String>>] header values\n  ValueSeparated2 : (separator1 = '\\x02', separator2 = '\\x01') -> (@get_separated2 \"Value\", separator1, separator2) || []\n  @property\n    BalloonOffset :\n      get : ->\n        for values in (@get_separated2 \"BalloonOffset\", \",\") || []\n          for value in values\n            Number(value)\n    Surface :\n      get : -> Number(value) for value in (@get_separated \"Surface\", \",\") || []\n    Sentence :\n      get : -> @get \"Sentence\"\n    Word :\n      get : -> @get \"Word\"\n    Status :\n      get : -> Number(value) for value in (@get_separated \"Status\", \",\") || []\n    String :\n      get : -> @get \"String\"\n    Value :\n      get : -> @get \"Value\"\n","ShioriJK.Shiori = {}\nShioriJK.Shiori.Header = {}\nShioriJK.Shiori.Request = {}\nShioriJK.Shiori.Request.RequestLine = {}\nShioriJK.Shiori.Request.Header = {}\nShioriJK.Shiori.Response = {}\nShioriJK.Shiori.Response.StatusLine = {}\nShioriJK.Shiori.Response.Header = {}\n\n# parser base class\nclass ShioriJK.Shiori.Parser\n  # @return [Boolean]\n  is_parsing : ->\n    not @section.is 'idle'\n  # @return [Boolean]\n  is_parsing_end : ->\n    not @section.is 'end'\n  # get parser result\n  # @return result\n  get_result : ->\n    @result\n  # build result container\n  # @abstract used by subclasses\n  # @return empty result container\n  result_builder : ->\n  # set section state to first section\n  # @throw [String] if before section != 'idle'\n  begin_parse : ->\n    unless @section.is 'idle'\n      throw 'cannot begin parsing because previous transaction is still working'\n    @result = @result_builder()\n    @section.next()\n  # set section state to begining section\n  # @throw [String] if before section != 'end'\n  end_parse : ->\n    unless @section.is 'end'\n      @abort_parse()\n      throw 'parsing was aborted'\n    @section.next()\n  # set section state to begining section FORCE!\n  # @note recursively abort parsing\n  abort_parse : ->\n    if @parsers?\n      for name, parser of @parsers\n        parser.abort_parse() if parser.abort_parse?\n    @section.set 'idle'\n  # parse a transaction\n  # @param transaction [String] complete transaction\n  # @return parse_chunk()'s one result\n  # @throw [String] if transaction is not complete\n  parse : (transaction) ->\n    @begin_parse()\n    result = @parse_chunk transaction\n    if @is_parsing()\n      throw 'transaction is not closed'\n    if result.results.length != 1\n      throw 'multiple transaction'\n    result.results[0]\n  # parse transaction chunk\n  # @param chunk [String] transaction chunk\n  # @return [Hash] parse_lines()'s results\n  parse_chunk : (chunk) ->\n    lines = chunk.split /\\r\\n/\n    if chunk.match /\\r\\n$/\n      lines.pop()\n    @parse_lines lines\n  # parse chunk lines\n  # @param lines [Array<String>] transaction chunk separated by \\r\\n\n  # @return [Hash] {results: parse_line()'s result, state: parser state}\n  parse_lines : (lines) ->\n    results = []\n    for line in lines\n      result = @parse_line line\n      if result.state == 'end'\n        results.push result.result\n    results : results\n    state : result.state\n  # parse line\n  # @param line [String] transaction line separated by \\r\\n\n  # @return [Hash] {results: result (if state is end), state: parser state}\n  parse_line : (line) ->\n    if @section.is 'idle'\n      @begin_parse()\n    @parse_main line\n    if @section.is 'end'\n      @end_parse()\n      result : @get_result()\n      state : 'end'\n    else\n      state : 'continue'\n  # parser main routine\n  # @abstract implemented by subclasses\n  parse_main : (line) ->\n\n# parser section state manager\nclass ShioriJK.Shiori.Section\n  constructor : (@sections) ->\n    @index = 0\n  is : (section) ->\n    @sections[@index] == section\n  next : ->\n    if @index == @sections.length - 1\n      @index = 0\n    else\n      @index++\n  previous : ->\n    if @index == 0\n      @index = @sections.length - 1\n    else\n      @index--\n  set : (section) ->\n    @index = @sections.indexOf section\n  get : ->\n    @sections[@index]\n\nclass ShioriJK.Shiori.Header.Parser extends ShioriJK.Shiori.Parser\n  parse_main : (line) ->\n    result = @parse_header line\n    if result.state == 'end'\n      @section.next()\n  parse_header : (line) ->\n    if line.length\n      if result = line.match /^(.+?): (.*)$/\n        @result.header[result[1]] = result[2]\n      else\n        throw 'Invalid header line : ' + line\n      state : 'continue'\n    else\n      state : 'end'\n\nclass ShioriJK.Shiori.Header.Section extends ShioriJK.Shiori.Section\n  constructor : (sections = ['idle', 'header', 'end']) ->\n    super(sections)\n    @index = 0\n\n# SHIORI Request parser\nclass ShioriJK.Shiori.Request.Parser extends ShioriJK.Shiori.Parser\n  constructor : () ->\n    super()\n    @parsers = {\n      request_line : new ShioriJK.Shiori.Request.RequestLine.Parser()\n      headers : new ShioriJK.Shiori.Request.Header.Parser()\n    }\n    @section = new ShioriJK.Shiori.Request.Section()\n  result_builder : ->\n    new ShioriJK.Message.Request(no_prepare: true)\n  parse_main : (line) ->\n    parser = @parsers[@section.get()]\n    parser_result = parser.parse_line line\n    if parser_result.state == 'end'\n      @result[@section.get()] = parser_result.result\n      @section.next()\n\nclass ShioriJK.Shiori.Request.RequestLine.Parser\n  constructor : () ->\n  result_builder : ->\n    new ShioriJK.RequestLine()\n  parse : (transaction) ->\n    @parse_chunk transaction\n  parse_chunk : (chunk) ->\n    @parse_line chunk\n  parse_line : (line) ->\n    result = line.match /^([A-Za-z0-9 ]+) SHIORI\\/([0-9.]+)/\n    unless result\n      throw 'Invalid request line : ' + line\n    @result = @result_builder()\n    @result.method = result[1]\n    @result.protocol = 'SHIORI'\n    @result.version = result[2]\n    result : @result\n    state : 'end'\n\nclass ShioriJK.Shiori.Request.Header.Parser extends ShioriJK.Shiori.Header.Parser\n  constructor : () ->\n    super()\n    @section = new ShioriJK.Shiori.Request.Header.Section()\n  result_builder : ->\n    new ShioriJK.Headers.Request()\n\nclass ShioriJK.Shiori.Request.Section extends ShioriJK.Shiori.Section\n  constructor : (sections = ['idle', 'request_line', 'headers', 'end']) ->\n    super(sections)\n    @index = 0\n\nclass ShioriJK.Shiori.Request.Header.Section extends ShioriJK.Shiori.Header.Section\n\n# SHIORI Response parser\nclass ShioriJK.Shiori.Response.Parser extends ShioriJK.Shiori.Parser\n  constructor : () ->\n    super()\n    @parsers = {\n      status_line : new ShioriJK.Shiori.Response.StatusLine.Parser()\n      headers : new ShioriJK.Shiori.Response.Header.Parser()\n    }\n    @section = new ShioriJK.Shiori.Response.Section()\n  result_builder : ->\n    new ShioriJK.Message.Response(no_prepare: true)\n  parse_main : (line) ->\n    parser = @parsers[@section.get()]\n    parser_result = parser.parse_line line\n    if parser_result.state == 'end'\n      @result[@section.get()] = parser_result.result\n      @section.next()\n\nclass ShioriJK.Shiori.Response.StatusLine.Parser\n  constructor : () ->\n  result_builder : ->\n    new ShioriJK.StatusLine()\n  parse : (transaction) ->\n    @parse_chunk transaction\n  parse_chunk : (chunk) ->\n    @parse_line chunk\n  parse_line : (line) ->\n    result = line.match /^SHIORI\\/([0-9.]+) (\\d+) (.+)$/\n    unless result\n      throw 'Invalid status line : ' + line\n    @result = @result_builder()\n    @result.protocol = 'SHIORI'\n    @result.version = result[1]\n    @result.code = result[2] - 0\n    result : @result\n    state : 'end'\n\nclass ShioriJK.Shiori.Response.Header.Parser extends ShioriJK.Shiori.Header.Parser\n  constructor : () ->\n    super()\n    @section = new ShioriJK.Shiori.Response.Header.Section()\n  result_builder : ->\n    new ShioriJK.Headers.Response()\n\nclass ShioriJK.Shiori.Response.Section extends ShioriJK.Shiori.Section\n  constructor : (sections = ['idle', 'status_line', 'headers', 'end']) ->\n    super(sections)\n    @index = 0\n\nclass ShioriJK.Shiori.Response.Header.Section extends ShioriJK.Shiori.Header.Section\n"]}